<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="description" content="Section 7: Residence early section. Gallery key route, wasp management, and room navigation strategies.">
<meta property="og:type" content="website">
<meta property="og:title" content="Section 7: Residence - Early - REmake Speedrun Guide">
<meta property="og:description" content="Speedrun walkthrough section from the RE REmake guide.">
<meta property="og:image" content="https://remake.wheelofstruggle.com/Logos/THUMB_s3r30_remake.webp">
<meta property="og:url" content="https://remake.wheelofstruggle.com/remake_guide_page_8.html">
<meta name="twitter:card" content="summary_large_image">
<title>Section 7: Residence - Early - REmake Speedrun Guide</title>
<link rel="stylesheet" href="styles.css?v=3">
</head>
<body>
  <div class="fog-container"><div class="fog"></div></div>
  <div class="blood-drips" id="bloodDrips"></div>
  <div class="progress-bar"><div class="progress-fill" id="progressBar"></div></div>

  <header class="header" id="header">
    <div class="header-content">
      <a href="index.html" class="logo">RESIDENT <span>EVIL</span></a>
      <div class="hamburger" id="hamburger" aria-label="Menu" role="button" tabindex="0"><span></span><span></span><span></span></div>
<nav class="nav">
        <a href="index.html">Home</a>
        <a href="remake_guide_page_1.html">Setup Guide</a>
        <div class="dropdown">
          <a href="remake_guide_page_2.html" class="dropdown-toggle">Walkthrough</a>
          <div class="dropdown-menu">
            <a href="remake_guide_page_2.html">Section 1: Mansion 1 - Opening</a>
            <a href="remake_guide_page_3.html">Section 2: Armour Key & Grenade Launcher</a>
            <a href="remake_guide_page_4.html">Section 3: Death Masks 2-4 & Yawn 1</a>
            <a href="remake_guide_page_5.html">Section 4: Gallery & Death Masks 3-4</a>
            <a href="remake_guide_page_6.html">Section 5: Elder Crimson Boss Fight</a>
            <a href="remake_guide_page_7.html">Section 6: Courtyard & Lisa's Hut</a>
            <a href="remake_guide_page_8.html">Section 7: Residence - Early</a>
            <a href="remake_guide_page_9.html">Section 8: Neptune & Aqua Ring</a>
            <a href="remake_guide_page_10.html">Section 9: Plant 42 Boss</a>
            <a href="remake_guide_page_11.html">Section 10: Mansion 2 - Hunter Navigation</a>
            <a href="remake_guide_page_12.html">Section 11: Yawn 2 & Gem Collection</a>
            <a href="remake_guide_page_13.html">Section 12: Underground Facility</a>
            <a href="remake_guide_page_14.html">Section 13: Lisa Trevor Underground</a>
            <a href="remake_guide_page_15.html">Section 14: Laboratory</a>
            <a href="remake_guide_page_16.html">Section 15: Tyrant & Helipad</a>
          </div>
        </div>
        <a href="resources-page.html">Resources</a>
        <a href="quick-reference-guide.html">Quick Reference</a>
        <a href="struggler_info_page.html">StruggleR</a>
      </nav>
    </div>
  </header>

  <main>
    <div class="section-hero">
      <div class="section-badge">SECTION 7 OF 15</div>
      <h1 class="section-title">Residence - Early</h1>
      <div class="section-meta">
        <span>‚Ä¢</span>
        <span>RESIDENCE</span>
        <span>‚Ä¢</span>
        <span>KEY COLLECTION</span>
      </div>
    </div>

    <div class="content-grid">
      <aside class="sidebar">
        <div class="toc">
          <h3>Contents</h3>
          <ul>
            <li><a href="#objectives" class="active">Objectives</a></li>
            <li><a href="#room-002">Room 002</a></li>
            <li><a href="#room-001">Room 001</a></li>
            <li><a href="#bookshelf-puzzle">Bookshelf Puzzle</a></li>
            <li><a href="#aqua-ring-access">Aqua Ring Access</a></li>
          </ul>

          <div class="section-nav">
            <h4>Navigate</h4>
            <a href="remake_guide_page_7.html" class="nav-link">‚Üê Section 6: Courtyard & Lisa's Hut</a>
            <a href="remake_guide_page_9.html" class="nav-link">Section 8: Neptune & Aqua Ring ‚Üí</a>
          </div>
        </div>
      </aside>

      <div class="main-content">
        <div class="objectives-box" id="objectives">
          <h3>Section Objectives</h3>
          <ul>
            <li>Navigate Rec Room and collect Red Book</li>
            <li>Survive tentacle encounters in hallway</li>
            <li>Collect keys from Room 001 and Room 002 bathrooms</li>
            <li>Solve bookshelf puzzle to access Aqua Ring</li>
            <li>Navigate box puzzle in flooded hallway</li>
          </ul>
        </div>

        <p>The Residence section is one of the most item-dense areas in the speedrun. Efficient routing and inventory management are critical here.</p>

        <div class="content-section" id="room-002">
          <h2>Room 002 Navigation</h2>
          
          <h3>Rec Room - Red Book</h3>
          
          <ol>
            <li>Go down the hallway into the Rec Room</li>
            <li>Grab the <strong>Red Book</strong> from the table</li>
            <li>Exit immediately</li>
          </ol>

          <div class="info-box">
            <div class="info-box-title">Spider Safety</div>
            <p>The spider at the door will only rarely attack you. Run straight through without hesitation and you'll avoid damage 95% of the time. The spider's attack is slow and telegraphed.</p>
          </div>
        </div>

        <div class="content-section" id="room-001">
          <h2>Room 002 and Room 001</h2>
          
          <h3>Tentacle Encounters</h3>
          
          <p>The hallway between rooms features tentacles that grab Jill. These encounters are unavoidable but deal minimal damage.</p>

          <div class="info-box">
            <div class="info-box-title">Tentacle Mechanics</div>
            <p><strong>Shake off technique:</strong> Spin the control stick or d-pad and mash confirm plus another face button simultaneously. The tentacle does no damage or fractional damage - there's no need for safety strategies.</p>
            <p style="margin-top: 0.75rem;">Jill will be able to tank the hits without going into Caution or Danger status.</p>
          </div>

          <h3>Room 002 - First Key</h3>
          
          <ol>
            <li>Shake off the tentacle on the way to Room 002</li>
            <li>Skip cutscenes and enter the bathroom</li>
            <li>Grab the <strong>001 Key</strong></li>
            <li>Leave back out of the room</li>
          </ol>

          <h3>Room 001 - Control Room Key</h3>
          
          <ol start="5">
            <li>Shake off the tentacle again in the hallway</li>
            <li>Go into Room 001's bathroom</li>
            <li>Grab the <strong>Control Room Key</strong></li>
            <li>Leave the bathroom</li>
          </ol>
        </div>

        <div class="content-section" id="inventory-management">
          <h2>Inventory Management Reminder</h2>
          
          <div class="info-box">
            <div class="info-box-title">Key Discarding</div>
            <p><strong>Important:</strong> When the game prompts you to discard keys after using them for the final time, always choose "Yes" to free up inventory space. Keys aren't automatically discarded when no longer needed, and keeping them wastes valuable inventory slots for upcoming items.</p>
            <p style="margin-top: 0.75rem;">This is especially critical in the Residence section where you'll collect multiple keys and need space for essential items like the Aqua Ring and other progression items.</p>
          </div>
        </div>

        <div class="content-section" id="bookshelf-puzzle">
          <h2>Bookshelf Puzzle</h2>
          
          <p>Return to Room 002 to access the bookshelf puzzle that leads to the Aqua Ring.</p>

          <h3>Puzzle Solution</h3>
          
          <ol>
            <li>Shake off the tentacle (third time) and return to Room 002</li>
            <li>Push the bookshelves in the room</li>
          </ol>

          <div class="info-box">
            <div class="info-box-title">Advanced Technique - Shelf Skip</div>
            <p>The left bookshelf can be skipped by beginning movement into it and gradually turning toward the right bookshelf. This saves approximately 2-3 seconds but requires precise analog stick control.</p>
            <p style="margin-top: 0.75rem;"><strong>Standard method:</strong> Push both shelves normally if you're not confident with the skip.</p>
          </div>

          <ol start="3">
            <li>Proceed down the ladder to the <strong>Aqua Ring</strong></li>
          </ol>
        </div>

        <div class="content-section" id="aqua-ring-access">
          <h2>Aqua Ring and Box Puzzle</h2>
          
          <h3>Flooded Hallway Navigation</h3>
          
          <p>The Aqua Ring area features a flooded hallway with boxes that must be pushed to create a path.</p>

          <ol>
            <li>Push the boxes into the water to create a path</li>
            <li>Proceed into the shark room (Neptune's area)</li>
          </ol>

          <div class="info-box warning">
            <div class="info-box-title">Safety Herb Available</div>
            <p>If you are concerned about taking a shark bite in the next section, pick up the Green Herb before entering the Aqua Ring. However, this costs inventory space.</p>
            <p style="margin-top: 0.75rem;">Most runners skip the herb and tank the shark bite if it occurs, as it's only a quick bite and won't put you into Danger.</p>
          </div>

          <h3>Current Progress</h3>
          
          <p>You've now collected:</p>
          <ul style="margin-left: 2rem; margin-bottom: 1.5rem;">
            <li>Red Book (for later puzzle)</li>
            <li>Control Room Key</li>
          </ul>

          <div class="info-box">
            <div class="info-box-title">What's Next</div>
            <p>Section 9 covers the shark room encounter with Neptune, the Control Room puzzle for draining water, and retrieving the Gallery Key. This includes one of the run's most dangerous skip opportunities.</p>
          </div>

          <h3>Practice Tips</h3>
          
          <p><strong>Tentacle Shaking:</strong> Practise the spin and button mash technique. The faster you shake free, the less time you lose to these encounters.</p>
          <p><strong>Room Routing:</strong> Memorise the path: Rec Room ‚Üí 002 ‚Üí 001 ‚Üí back to 002 ‚Üí ladder. Any backtracking or wrong turns costs significant time.</p>
          <p><strong>Bookshelf Skip:</strong> Only attempt the advanced skip if you've practiced it. Missing the skip and having to correct wastes more time than just pushing both shelves normally.</p>
        </div>

        <div class="page-nav">
          <a href="remake_guide_page_7.html" class="page-nav-btn">
            <span>‚Üê</span>
            <span>Section 6: Courtyard & Lisa's Hut</span>
          </a>
          <a href="remake_guide_page_9.html" class="page-nav-btn">
            <span>Section 8: Neptune & Aqua Ring</span>
            <span>‚Üí</span>
          </a>
        </div>
      </div>
    </div>
  </main>

  <script>
    // Blood drip animation
    const bloodDripsContainer = document.getElementById('bloodDrips');
    for (let i = 0; i < 5; i++) {
      const drip = document.createElement('div');
      drip.className = 'blood-drip';
      drip.style.left = Math.random() * 100 + '%';
      drip.style.animationDelay = Math.random() * 3 + 's';
      drip.style.animationDuration = (Math.random() * 2 + 2) + 's';
      bloodDripsContainer.appendChild(drip);
    }

    window.addEventListener('scroll', () => {
      const winScroll = document.documentElement.scrollTop;
      const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
      document.getElementById('progressBar').style.width = (winScroll / height) * 100 + '%';
    });

    window.addEventListener('scroll', () => {
      const header = document.getElementById('header');
      header.classList.toggle('scrolled', window.scrollY > 100);
    });

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({ behavior: 'smooth', block: 'start' });
          document.querySelectorAll('.toc a').forEach(link => link.classList.remove('active'));
          this.classList.add('active');
        }
      });
    });

    const sections = document.querySelectorAll('.content-section');
    const tocLinks = document.querySelectorAll('.toc a');

    window.addEventListener('scroll', () => {
      let current = '';
      sections.forEach(section => {
        if (scrollY >= section.offsetTop - 150) current = section.getAttribute('id');
      });

      tocLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === '#' + current) link.classList.add('active');
      });
    });
  

// Reset any horizontal scroll on page load (fixes iOS navigation issue)
window.scrollTo(0, 0);
document.documentElement.scrollLeft = 0;
document.body.scrollLeft = 0;

// Hamburger menu toggle
(function() {
  const hamburger = document.getElementById('hamburger');
  const nav = document.querySelector('.nav');
  
  if (hamburger && nav) {
    // Toggle menu
    hamburger.addEventListener('click', function(e) {
      e.stopPropagation();
      hamburger.classList.toggle('active');
      nav.classList.toggle('active');
      hamburger.setAttribute('aria-expanded', nav.classList.contains('active'));
    });
    
    // Close menu when clicking nav links (not dropdown toggles)
    nav.querySelectorAll('a:not(.dropdown-toggle)').forEach(function(link) {
      link.addEventListener('click', function() {
        hamburger.classList.remove('active');
        nav.classList.remove('active');
        hamburger.setAttribute('aria-expanded', 'false');
        // Also close any open dropdowns
        nav.querySelectorAll('.dropdown.open').forEach(function(d) {
          d.classList.remove('open');
        });
      });
    });
    
    // Dropdown toggle (don't close menu, just toggle dropdown)
    nav.querySelectorAll('.dropdown-toggle').forEach(function(toggle) {
      toggle.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        this.parentElement.classList.toggle('open');
      });
    });
    
    // Close dropdown when clicking dropdown menu links
    nav.querySelectorAll('.dropdown-menu a').forEach(function(link) {
      link.addEventListener('click', function() {
        // Close the dropdown
        this.closest('.dropdown').classList.remove('open');
        // Close the nav menu on mobile
        hamburger.classList.remove('active');
        nav.classList.remove('active');
        hamburger.setAttribute('aria-expanded', 'false');
      });
    });
    
    // Close menu and dropdowns when clicking outside
    document.addEventListener('click', function(e) {
      if (!nav.contains(e.target) && !hamburger.contains(e.target)) {
        hamburger.classList.remove('active');
        nav.classList.remove('active');
        hamburger.setAttribute('aria-expanded', 'false');
        nav.querySelectorAll('.dropdown.open').forEach(function(d) {
          d.classList.remove('open');
        });
      }
    });
    
    // Keyboard support (Escape to close)
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape' && nav.classList.contains('active')) {
        hamburger.classList.remove('active');
        nav.classList.remove('active');
        hamburger.setAttribute('aria-expanded', 'false');
        nav.querySelectorAll('.dropdown.open').forEach(function(d) {
          d.classList.remove('open');
        });
      }
    });
  }
})();

</script>

  <footer class="footer">
    <div class="footer-content">
      <div class="footer-info">
        <p>Original Guide by Deccyf</p>
        <p>¬© 2025 Wheel of Struggle Community Speedrun Guide ‚Ä¢ All Rights Reserved</p>
      </div>
      <div class="footer-buttons">
        <a href="https://discord.com/invite/8RVRE33WfN" class="footer-btn discord-btn" target="_blank">
          <img src="Logos/e5d0b9e74328b8ce389bd8dd7f4e56b0.webp" alt="Discord" class="footer-icon discord-logo" loading="lazy">
          Discord
        </a>
        <a href="https://wheelofstruggle.com" class="footer-btn website-btn" target="_blank">
          <img src="Logos/WoS_Discord_Colour_V2.webp" alt="Wheel of Struggle" class="footer-icon website-logo" loading="lazy">
          Website
        </a>
      </div>
    </div>
  </footer>

  <script>
    // ENHANCED MUSIC CONTROL SYSTEM
    let backgroundMusic = null;
    let musicControlPanel = null;
    const musicFiles = ['01 R.E. 1 Save Room- Safe Haven.mp3'];

    function createMusicControl() {
      musicControlPanel = document.createElement('div');
      musicControlPanel.id = 'musicControlPanel';
      musicControlPanel.innerHTML = `
        <div class="music-control-header">
          <span class="music-icon">üéµ</span>
          <span class="music-title">Background Music</span>
          <button id="musicCloseBtn" class="music-close-btn">√ó</button>
        </div>
        <div class="music-control-content">
          <button id="musicToggleBtn" class="music-toggle-btn">
            <span id="musicToggleIcon">‚ñ∂Ô∏è</span>
            <span id="musicToggleText">Play</span>
          </button>
          <div class="music-volume-container">
            <span class="music-volume-label">Volume</span>
            <input type="range" id="musicVolumeSlider" min="0" max="100" value="30" class="music-volume-slider">
            <span id="musicVolumeValue">30</span>
          </div>
          <div class="music-status" id="musicStatus">Ready to play</div>
        </div>
      `;
      
      musicControlPanel.style.cssText = `
        position: fixed; bottom: 20px; right: 20px; width: 250px; background: rgba(13, 13, 13, 0.95);
        border: 2px solid var(--re-blood); border-radius: 15px; box-shadow: 0 8px 30px rgba(139, 0, 0, 0.4);
        backdrop-filter: blur(20px); z-index: 1000; opacity: 0; transform: translateY(20px);
        transition: all 0.3s ease; font-family: 'Barlow', sans-serif;
      `;

      const style = document.createElement('style');
      style.textContent = `
        .music-control-header { background: var(--re-blood); color: white; padding: 12px 15px;
          border-radius: 13px 13px 0 0; display: flex; align-items: center; justify-content: space-between;
          font-weight: 700; font-size: 14px; }
        .music-icon { font-size: 16px; }
        .music-close-btn { background: none; border: none; color: white; font-size: 20px;
          cursor: pointer; padding: 0; width: 25px; height: 25px; border-radius: 50%;
          display: flex; align-items: center; justify-content: center; transition: background 0.2s ease; }
        .music-close-btn:hover { background: rgba(255, 255, 255, 0.2); }
        .music-control-content { padding: 15px; }
        .music-toggle-btn { width: 100%; background: rgba(139, 0, 0, 0.2); border: 2px solid var(--re-blood);
          color: white; padding: 12px 15px; border-radius: 25px; cursor: pointer; display: flex;
          align-items: center; justify-content: center; gap: 8px; font-weight: 600; font-size: 14px;
          margin-bottom: 15px; transition: all 0.3s ease; }
        .music-toggle-btn:hover { background: var(--re-blood); transform: translateY(-2px);
          box-shadow: 0 4px 15px rgba(139, 0, 0, 0.4); }
        .music-volume-container { display: flex; align-items: center; gap: 10px; margin-bottom: 15px; }
        .music-volume-label { color: var(--re-gray); font-size: 12px; font-weight: 600; min-width: 50px; }
        .music-volume-slider { flex: 1; height: 6px; background: rgba(139, 0, 0, 0.3);
          border-radius: 3px; outline: none; cursor: pointer; }
        .music-volume-slider::-webkit-slider-thumb { appearance: none; width: 18px; height: 18px;
          background: var(--re-blood); border-radius: 50%; cursor: pointer; box-shadow: 0 0 8px rgba(139, 0, 0, 0.6); }
        .music-volume-slider::-moz-range-thumb { width: 18px; height: 18px; background: var(--re-blood);
          border-radius: 50%; cursor: pointer; border: none; box-shadow: 0 0 8px rgba(139, 0, 0, 0.6); }
        #musicVolumeValue { color: var(--re-white); font-weight: 600; font-size: 12px; min-width: 30px; text-align: right; }
        .music-status { color: var(--re-gray); font-size: 11px; font-weight: 500; text-align: center;
          padding: 5px; background: rgba(139, 0, 0, 0.1); border-radius: 8px; margin-top: 10px; }
      `;
      document.head.appendChild(style);
      document.body.appendChild(musicControlPanel);
      
      setTimeout(() => { musicControlPanel.style.opacity = '1'; musicControlPanel.style.transform = 'translateY(0)'; }, 100);

      setupMusicControlEvents();
    }

    function setupMusicControlEvents() {
      document.getElementById('musicToggleBtn').addEventListener('click', toggleMusic);
      document.getElementById('musicVolumeSlider').addEventListener('input', updateVolume);
      document.getElementById('musicCloseBtn').addEventListener('click', hideMusicControl);
      document.getElementById('musicVolumeValue').textContent = document.getElementById('musicVolumeSlider').value;
      updateVolume();
    }

    function toggleMusic() {
      const toggleIcon = document.getElementById('musicToggleIcon');
      const toggleText = document.getElementById('musicToggleText');
      const status = document.getElementById('musicStatus');
      if (!backgroundMusic) { startBackgroundMusic(); toggleIcon.textContent = '‚è∏Ô∏è'; toggleText.textContent = 'Pause';
        status.textContent = 'Playing Resident Evil Theme'; status.style.color = 'var(--re-green)'; }
      else if (backgroundMusic.paused) { backgroundMusic.play(); toggleIcon.textContent = '‚è∏Ô∏è'; toggleText.textContent = 'Pause';
        status.textContent = 'Playing Resident Evil Theme'; status.style.color = 'var(--re-green)'; }
      else { backgroundMusic.pause(); toggleIcon.textContent = '‚ñ∂Ô∏è'; toggleText.textContent = 'Play';
        status.textContent = 'Music paused'; status.style.color = 'var(--re-gray)'; }
    }

    function updateVolume() {
      const volumeSlider = document.getElementById('musicVolumeSlider');
      const volumeValue = document.getElementById('musicVolumeValue');
      const volume = parseInt(volumeSlider.value) / 100;
      volumeValue.textContent = volumeSlider.value;
      if (backgroundMusic) backgroundMusic.volume = volume;
      localStorage.setItem('musicVolume', volumeSlider.value);
    }

    function startBackgroundMusic() {
      if (backgroundMusic) return;
      backgroundMusic = new Audio();
      backgroundMusic.src = musicFiles[0];
      backgroundMusic.loop = true;
      const savedVolume = localStorage.getItem('musicVolume') || '30';
      backgroundMusic.volume = parseInt(savedVolume) / 100;
      document.getElementById('musicVolumeSlider').value = savedVolume;
      document.getElementById('musicVolumeValue').textContent = savedVolume;
      backgroundMusic.play().then(() => {
        document.getElementById('musicStatus').textContent = 'Playing Resident Evil Theme';
        document.getElementById('musicStatus').style.color = 'var(--re-green)';
        document.getElementById('musicToggleIcon').textContent = '‚è∏Ô∏è';
        document.getElementById('musicToggleText').textContent = 'Pause';
      }).catch(() => {
        document.getElementById('musicStatus').textContent = 'Click play to start music';
        document.getElementById('musicStatus').style.color = 'var(--re-gray)';
      });
      backgroundMusic.addEventListener('ended', () => { backgroundMusic.currentTime = 0; backgroundMusic.play(); });
      backgroundMusic.addEventListener('error', (e) => {
        document.getElementById('musicStatus').textContent = 'Music file not found';
        document.getElementById('musicStatus').style.color = 'var(--re-blood)';
      });
    }

    function hideMusicControl() {
      if (musicControlPanel) {
        musicControlPanel.style.opacity = '0'; musicControlPanel.style.transform = 'translateY(20px)';
        setTimeout(() => { if (musicControlPanel && musicControlPanel.parentNode) musicControlPanel.parentNode.removeChild(musicControlPanel); musicControlPanel = null; }, 300);
      }
    }

    function showMusicControlButton() {
      const musicButton = document.createElement('div');
      musicButton.id = 'musicControlButton';
      musicButton.innerHTML = 'üéµ Music';
      musicButton.style.cssText = `position: fixed; bottom: 20px; right: 20px; background: rgba(139, 0, 0, 0.8);
        color: var(--re-white); padding: 12px 18px; border-radius: 25px; cursor: pointer; font-size: 14px; font-weight: 600;
        z-index: 1000; transition: all 0.3s ease; box-shadow: 0 4px 15px rgba(139, 0, 0, 0.3); border: 2px solid rgba(139, 0, 0, 0.3);`;
      
      musicButton.addEventListener('mouseenter', () => { musicButton.style.background = 'var(--re-blood)'; musicButton.style.transform = 'scale(1.05)'; musicButton.style.boxShadow = '0 6px 20px rgba(139, 0, 0, 0.5)'; });
      musicButton.addEventListener('mouseleave', () => { musicButton.style.background = 'rgba(139, 0, 0, 0.8)'; musicButton.style.transform = 'scale(1)'; musicButton.style.boxShadow = '0 4px 15px rgba(139, 0, 0, 0.3)'; });
      musicButton.addEventListener('click', () => { createMusicControl(); musicButton.remove(); });
      document.body.appendChild(musicButton);
    }

    function initBackgroundMusic() {
      const musicInteracted = localStorage.getItem('musicInteracted') === 'true';
      if (!musicInteracted) {
        document.addEventListener('click', () => {
          localStorage.setItem('musicInteracted', 'true');
          document.getElementById('musicControlButton')?.remove();
          showMusicControlButton();
        }, { once: true });
      } else {
        showMusicControlButton();
      }
    }

    initBackgroundMusic();
    
    // MOBILE DROPDOWN NAVIGATION FIX
    (function() {
      const dropdown = document.querySelector('.dropdown');
      const dropdownToggle = document.querySelector('.dropdown-toggle');
      const dropdownMenu = document.querySelector('.dropdown-menu');
      if (!dropdown || !dropdownToggle || !dropdownMenu) return;
      function isMobile() { return window.innerWidth <= 768; }
      dropdownToggle.addEventListener('click', function(e) {
        if (isMobile()) { e.preventDefault(); e.stopPropagation(); dropdown.classList.toggle('open'); }
      });
      document.addEventListener('click', function(e) {
        if (isMobile() && !dropdown.contains(e.target)) dropdown.classList.remove('open');
      });
      dropdownMenu.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', function() { if (isMobile()) dropdown.classList.remove('open'); });
      });
      let wasMobile = isMobile();
      window.addEventListener('resize', function() {
        const nowMobile = isMobile();
        if (wasMobile !== nowMobile) dropdown.classList.remove('open');
        wasMobile = nowMobile;
      });
    })();
  </script>
</body>
</html>
